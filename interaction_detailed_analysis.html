<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анализ всех взаимодействий в игре VYRUS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #333;
        }
        .interaction {
            background-color: #e8f5e8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            border-left: 5px solid #4CAF50;
        }
        .computation {
            background-color: #fff3e0;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            border-left: 3px solid #FF9800;
        }
        .effect {
            background-color: #e3f2fd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            border-left: 3px solid #2196F3;
        }
        .performance {
            background-color: #fce4ec;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            border-left: 3px solid #E91E63;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Анализ всех взаимодействий в игре VYRUS</h1>
        
        <div class="interaction">
            <h2>Взаимодействие 1: Атака (Attack)</h2>
            <p>Во время фазы боя каждая занятая клетка проверяет своих соседей, и если соседняя клетка принадлежит другому игроку, происходит попытка атаки.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Шанс атаки: (mobility/16 + infectivity/16 + aggression/16) / 3</li>
                    <li>Шанс защиты: (resistance/16 + defense/16) / 2</li>
                    <li>Сравнение шансов: если шанс атаки > шанса защиты, атака успешна</li>
                    <li>Проверка всех 8 соседей для каждой занятой клетки</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Волновой эффект при атаке</li>
                    <li>Волновой эффект при захвате</li>
                    <li>Интерактивные эффекты типа "attack" и "capture"</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Высокое - каждая клетка проверяет до 8 соседей</li>
                    <li>Сложность: O(N*K), где N - количество занятых клеток, K - количество соседей</li>
                    <li>В середине игры может быть 500-1000 занятых клеток</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 2: Захват территории (Capture)</h2>
            <p>Когда атака успешна, клетка меняет владельца, переходит от одного игрока к другому.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Проверка успешности атаки (см. выше)</li>
                    <li>Изменение владельца клетки в сетке</li>
                    <li>Обновление счетчика территории для обоих игроков</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Волновой эффект при захвате</li>
                    <li>Интерактивный эффект типа "capture"</li>
                    <li>Возможные параметрические эффекты в зависимости от вируса</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Среднее - требует обновления данных в сетке</li>
                    <li>Может вызывать каскадные изменения в следующих ходах</li>
                    <li>Влияние на подсчет территории в следующем ходу</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 3: Расширение (Expansion)</h2>
            <p>Клетки пытаются распространиться на соседние пустые клетки в фазе расширения.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Шанс расширения: (reproduction/16 + mobility/16 + infectivity/16) / 3</li>
                    <li>Поиск пустых соседних клеток</li>
                    <li>Проверка специфических условий для разных типов вирусов (стабильность, скрытность, мобильность)</li>
                    <li>Случайный выбор целевой клетки для расширения</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Эффекты источника расширения</li>
                    <li>Эффекты пути расширения</li>
                    <li>Эффекты цели расширения</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Среднее - каждая клетка проверяет соседей</li>
                    <li>Сложность увеличивается при высоких значениях параметров (например, скрытность > 10)</li>
                    <li>Может вызывать цепочку расширений в следующих ходах</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 4: Защита (Defense)</h2>
            <p>Когда клетка подвергается атаке, она использует свои защитные параметры для сопротивления.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Шанс защиты: (resistance/16 + defense/16) / 2</li>
                    <li>Сравнение с шансом атаки атакующего</li>
                    <li>Определение успешности защиты</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Параметрические эффекты при высоких значениях защиты</li>
                    <li>Интерактивные эффекты типа "defense"</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Низкое - вычисления происходят как часть атаки</li>
                    <li>Не требует дополнительных ресурсов помимо атаки</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 5: Скрытность (Stealth)</h2>
            <p>Вирусы со скрытностью > 10 могут распространяться на расстоянии, обходя ближайших соседей.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Проверка условия: stealth > 10</li>
                    <li>30% шанс попытки скрытного расширения</li>
                    <li>Поиск пустых клеток на расстоянии 2-3 шагов</li>
                    <li>Проверка наличия пути к целевой клетке</li>
                    <li>Шанс расширения: (stealth/16 + infectivity/16) / 2</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Параметрические эффекты при высоких значениях скрытности</li>
                    <li>Эффекты расширения (если успешно)</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Высокое - требует дополнительных проверок на больших расстояниях</li>
                    <li>Сложность: O(N*K*D²), где D - максимальное расстояние скрытного расширения</li>
                    <li>Значительно увеличивает вычислительную нагрузку при высоких значениях скрытности</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 6: Мобильность (Mobility)</h2>
            <p>Вирусы с мобильностью > 10 могут предпочитать определенные направления при расширении.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Проверка условия: mobility > 10</li>
                    <li>Выбор предпочтительного направления (если не задано)</li>
                    <li>70% шанс следовать предпочтительному направлению</li>
                    <li>Шанс расширения: (reproduction/16 + mobility/16 + infectivity/16) / 3</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Параметрические эффекты при высоких значениях мобильности</li>
                    <li>Эффекты расширения</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Среднее - добавляет логику выбора направления</li>
                    <li>Требует хранения предпочтительного направления для каждой клетки</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 7: Агрессия (Aggression)</h2>
            <p>Вирусы с агрессией > 12 могут захватывать сразу несколько соседних клеток.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Проверка условия: aggression > 12</li>
                    <li>20% шанс взрывного роста</li>
                    <li>Поиск 2-3 пустых клеток в одном направлении</li>
                    <li>70% шанс успешного захвата каждой клетки</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Параметрические эффекты при высоких значениях агрессии</li>
                    <li>Множественные эффекты захвата</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Высокое - может привести к множественным захватам за один ход</li>
                    <li>Увеличивает плотность населения быстрее обычного</li>
                    <li>Может вызвать каскадные эффекты в следующих ходах</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 8: Стабильность (Stability)</h2>
            <p>Вирусы со стабильностью > 10 имеют особое поведение при расширении.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Проверка условия: stability > 10</li>
                    <li>Если условие истинно, используется упрощенная логика расширения</li>
                    <li>Расширение только на ближайшие соседние пустые клетки</li>
                    <li>Шанс расширения: (reproduction/16 + infectivity/16) / 2</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Параметрические эффекты при высоких значениях стабильности</li>
                    <li>Градиентные эффекты при высоких значениях (>8)</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Низкое - на самом деле упрощает логику расширения</li>
                    <li>Может уменьшить количество вычислений в фазе расширения</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 9: Взаимодействие параметров (Parameter Interaction)</h2>
            <p>При высоких значениях параметров (>8) активируются визуальные эффекты.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Проверка значений параметров: aggression > 8, defense > 8, speed > 8 и т.д.</li>
                    <li>Создание параметрических эффектов при превышении порога</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Различные визуальные эффекты в зависимости от параметра</li>
                    <li>blob-эффекты при высокой мутации</li>
                    <li>Линии связи при высоком интеллекте</li>
                    <li>Градиенты при высокой стабильности</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Среднее - требует проверки параметров и создания эффектов</li>
                    <li>Может значительно увеличиться при большом количестве вирусов с высокими параметрами</li>
                </ul>
            </div>
        </div>

        <div class="interaction">
            <h2>Взаимодействие 10: Энергетический поток (Energy Flow)</h2>
            <p>Визуальный эффект, представляющий передачу энергии между клетками.</p>
            
            <div class="computation">
                <h3>Что вычисляется:</h3>
                <ul>
                    <li>Позиции клеток для визуализации потока</li>
                    <li>Цвета и интенсивность эффектов</li>
                    <li>Временные параметры анимации</li>
                </ul>
            </div>
            
            <div class="effect">
                <h3>Визуальные эффекты:</h3>
                <ul>
                    <li>Эффекты энергетического потока между клетками</li>
                    <li>Анимированные линии передачи</li>
                </ul>
            </div>
            
            <div class="performance">
                <h3>Влияние на производительность:</h3>
                <ul>
                    <li>Среднее - зависит от настроек качества визуальных эффектов</li>
                    <li>Может накапливаться при высокой частоте обновлений</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>